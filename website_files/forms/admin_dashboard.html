<!doctype html>
<html lang="en">
    <head>
        <title> The Admin Dashboard </title>
		<link rel="stylesheet" href="styles.css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
		<style>
		   .barrier {
            height: 45px;
            background-color: black;
           }
		</style>
    </head>
	<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  </head>
  <body>
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand" href="#"><img src="https://umbc.edu/wp-content/uploads/2022/02/umbc-primary-logo-250x58.png"></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">
      </div>
    </div>
  </div>
</nav>
    
    <body>
        <!-- The Dashboard -->
        <div>
            <div>
				<div>
					<h2> <br>Tickets Log </h2>
				</div>
            </div>
			<div>
				<?php
				// Database connection
				$connect = mysqli_connect(
					'db',
					'UMBCstudent',
					'bongocat123',
					'main_project_db'
				);

				if (!$connect) {
					die("Database connection failed: " . mysqli_connect_error());
				}

				$query = 'SELECT * FROM ticket';
				$result = mysqli_query($connect, $query);
				
				if(!$result) {
					echo "Error running query: " . mysqli_error($connect);
				}
				elseif (mysqli_num_rows($result) > 0){
					echo "<div>";
					echo "<table>";
					echo "<thead>
						<tr>
							<th> ID </th>
							<th> Confirmations </th>
							<th> Type </th>
							<th> Submitted Date </th>
						</tr>
					</thead><tbody>";

					while ($row = mysqli_fetch_assoc($result)) {
						echo "<tr>
							<td>" . htmlspecialchars($row['t_id']). "</td>
							<td>" . htmlspecialchars($row['confirmation']). "</td>
							<td>" . htmlspecialchars($row['ticket_type']). "</td>
							<td>" . htmlspecialchars($row['submitted']). "</td>
						</tr>";
					}

					echo "</tbody></table><br></div>";
				}
				else {
					echo "No tickets are found!";
				}

				mysqli_close($connect);
			    ?>
			</div>
        </div>

		<div>
			<div>
				<table>
					<thead>
						<tr>
							<th> <a href ="dashboard.html" class="formatlink"> Add a Ticket </a> </th>
						</tr>
					</thead>
				</table>
			</div>
		</div>

		        <!-- Image -->
        <img src="pngwing.com(2).png" alt="Wall-E" width="360" height="360"> 
    </body>
</html>